{% extends 'admin/base_site.html' %}
{% load static %}

{% block content %}
<div class="dashboard">
    <!-- 用户统计卡片 -->
    <div class="stats-cards">
        <div class="card">
            <div class="card-body">
                <i class="fas fa-users"></i>
                <div class="card-info">
                    <h3>{{ total_users }}</h3>
                    <p>总用户数</p>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <i class="fas fa-user-check"></i>
                <div class="card-info">
                    <h3>{{ active_users }}</h3>
                    <p>正常用户</p>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <i class="fas fa-user-clock"></i>
                <div class="card-info">
                    <h3>{{ warned_users }}</h3>
                    <p>警告用户</p>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <i class="fas fa-user-lock"></i>
                <div class="card-info">
                    <h3>{{ banned_users }}</h3>
                    <p>封禁用户</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 最新公告列表 -->
    <div class="announcements">
        <h2>最新公告</h2>
        <div class="announcement-list">
            {% for announcement in latest_announcements %}
            <div class="announcement-item">
                <h3>{{ announcement.title }}</h3>
                <p>{{ announcement.content|truncatewords:30 }}</p>
                <span class="time">{{ announcement.created_at|date:"Y-m-d H:i" }}</span>
            </div>
            {% empty %}
            <p>暂无公告</p>
            {% endfor %}
        </div>
    </div>
</div>

<style>
.dashboard {
    padding: 20px;
}

.stats-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.card {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.card-body {
    padding: 20px;
    display: flex;
    align-items: center;
}

.card i {
    font-size: 2.5em;
    margin-right: 20px;
    color: #79aec8;
}

.card-info h3 {
    margin: 0;
    font-size: 24px;
    color: #333;
}

.card-info p {
    margin: 5px 0 0;
    color: #666;
}

.announcements {
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.announcements h2 {
    margin-top: 0;
    color: #333;
    font-size: 18px;
}

.announcement-item {
    padding: 15px 0;
    border-bottom: 1px solid #eee;
}

.announcement-item:last-child {
    border-bottom: none;
}

.announcement-item h3 {
    margin: 0;
    font-size: 16px;
    color: #333;
}

.announcement-item p {
    margin: 5px 0;
    color: #666;
}

.announcement-item .time {
    font-size: 12px;
    color: #999;
}
</style>
{% endblock %} 